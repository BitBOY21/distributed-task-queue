# 1. שימוש בגרסת פייתון קלה ומהירה (מבוססת לינוקס)
FROM python:3.10-slim

# 2. הגדרת תיקיית העבודה בתוך הקונטיינר
WORKDIR /app

# 3. העתקת קובץ הדרישות והתקנת הספריות
# (אנחנו מעתיקים קודם רק אותו כדי לנצל את הזיכרון של דוקר - זה מאיץ בניות עתידיות)
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# 4. העתקת כל שאר הקוד שלך לתוך הקונטיינר
COPY . .

# 5. חשיפת הפורט שבו FastAPI רץ
EXPOSE 8000

# 6. הפקודה שתריץ את השרת כשהקונטיינר עולה
# חשוב: --host 0.0.0.0 חובה כדי שנוכל לגשת לשרת מבחוץ
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]